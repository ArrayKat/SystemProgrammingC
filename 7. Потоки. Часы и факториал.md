### 18. Разработка программы-секундомера. в одном потоке идет отсчет времени, а в другом осуществляется управление секундомером (отдельно для Windows и Linux)

#### Windows

``` C
#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>
#include <stdlib.h>
#include <Windows.h>

struct SecTime {
	int hours;
	int minutes;
	int seconds;
};
struct SecTime time;
HANDLE hThread[2];

DWORD WINAPI MenuSecundomer() {
	while (1)
	{
		printf("0. Запустить секундомер.\n");
		printf("1. Показать время секундомера.\n");
		printf("2. Поставить на паузу.\n");
		printf("3. Снять с паузы.\n");
		printf("4. Сбросить секундомер.\n");
		printf("5. Завершить программу.\n");

		int choise = 0;
		scanf_s("%d", &choise);
		switch (choise)
		{
		case 0: ResumeThread(hThread[0]); break; //запускаем поток
		case 1: printf("Время на секундамере: %d:%d:%d\n", time.hours, time.minutes, time.seconds); break;
		case 2: SuspendThread(hThread[0]); break;
		case 3: ResumeThread(hThread[0]); break;
		case 4: 
			SuspendThread(hThread[0]);
			time.hours = 0;
			time.minutes = 0;
			time.seconds = 0;
			break;
		case 5: 
			TerminateThread(hThread[0], 0);
			ExitThread(0);
			break;
		default: printf("Вы ошиблись! Такой функции нет, введите другую.");
			break;
		}
	}
}

DWORD WINAPI StartSecundamer() {
	while (1) {
		time.seconds++;
		if (time.seconds == 60) {
			time.seconds = 0;
			time.minutes++;
			if (time.minutes == 60) {
				time.minutes = 0;
				time.hours++;
			}
		}
		Sleep(1000);
	}
}

int main_18() {
	system("chcp 1251");
	hThread[0] = CreateThread(0,0, StartSecundamer ,0,CREATE_SUSPENDED,0); //CREATE_SUSPENDED - позволяет создать приостановленный поток, который запустится не стразу, а только тогда, когда его вызовут
	hThread[1] = CreateThread(0,0, MenuSecundomer,0,0,0);

	WaitForMultipleObjects(2, hThread, TRUE, INFINITE);
	CloseHandle(hThread[0]);
	CloseHandle(hThread[1]);
}
```